<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ―Έν™” ν’λ© μ μ¶ μ‹μ¤ν… (QR κ³µμ )</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>λ―Έν™” ν’λ© μ μ¶ μ‹μ¤ν…</h1>
            <p>μ μ¶ ν›„ QRμ½”λ“λ¥Ό μ°μ–΄μ„ κ³µμ ν•μ„Έμ”!</p>
        </header>

        <!-- κΈ°λ³Έ νΌ (μ΄μ „κ³Ό λ™μΌ) -->
        <div id="formSection">
            <form id="itemForm">
                <div class="form-group">
                    <label for="name">μ‹ μ²­μ μ΄λ¦„:</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="department">λ¶€μ„/ν€:</label>
                    <input type="text" id="department" name="department" required>
                </div>
                <!-- ν’λ©λ“¤... -->
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">μ μ¶ν•κΈ°</button>
                </div>
            </form>
        </div>

        <!-- QRμ½”λ“ ν‘μ‹ -->
        <div id="qrSection" class="success-section hidden">
            <div class="success-message">
                <h3>μ μ¶ μ™„λ£! π“±</h3>
                <div id="submissionInfo"></div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <h4>QRμ½”λ“λ΅ κ³µμ ν•κΈ°</h4>
                    <div id="qrcode" style="display: inline-block; padding: 20px; background: white; border-radius: 10px;"></div>
                    <p style="margin-top: 15px;">λ‹¤λ¥Έ λ¶„λ“¤μ΄ μ΄ QRμ½”λ“λ¥Ό μ°μΌλ©΄<br>λ‚΄ μ‹ μ²­ λ‚΄μ—­μ„ λ³Ό μ μμ–΄μ”!</p>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-primary" onclick="shareQR()">QRμ½”λ“ κ³µμ </button>
                    <button type="button" class="btn btn-secondary" onclick="newSubmission()">μƒ μ‹ μ²­</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // QRμ½”λ“ μƒμ„± λ° κ³µμ  λ΅μ§
        function generateQR(data) {
            const url = createShareUrl(data);
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';
            
            QRCode.toCanvas(qrContainer, url, {
                width: 200,
                height: 200,
                margin: 2
            }, function(error) {
                if (error) console.error(error);
            });
        }

        function shareQR() {
            // QRμ½”λ“ μ΄λ―Έμ§€λ¥Ό μΊ΅μ²ν•΄μ„ κ³µμ 
            html2canvas(document.getElementById('qrcode')).then(canvas => {
                canvas.toBlob(blob => {
                    if (navigator.share) {
                        navigator.share({
                            title: 'λ―Έν™” ν’λ© μ‹ μ²­',
                            text: `${currentSubmission.name}λ‹μ μ‹ μ²­ λ‚΄μ—­`,
                            files: [new File([blob], 'qr-code.png', { type: 'image/png' })]
                        });
                    }
                });
            });
        }
    </script>
</body>
</html>